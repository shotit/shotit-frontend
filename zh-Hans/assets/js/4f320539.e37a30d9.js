"use strict";(self.webpackChunkshotit_frontend=self.webpackChunkshotit_frontend||[]).push([[660],{8735:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var n=a(7294),s=a(7961),o=a(1100);const l={demoContainer:"demoContainer_ryNF",searchBarContainer:"searchBarContainer_jUod",leftDemoSide:"leftDemoSide_MgLx",rightDemoSide:"rightDemoSide_e2SL",skeleton:"skeleton_U82o",searching:"searching_hC35",resultArea:"resultArea_LlqA",resultBox:"resultBox_lQJA",filename:"filename_asqc",thumbnail:"thumbnail_SaY7",metainfo:"metainfo_cmrU",loadingSvg:"loadingSvg_jZrn",searchingText:"searchingText_sLVQ",dropEffect:"dropEffect_eBLf",dropping:"dropping_urYM"},r=a.p+"assets/images/default-e894fa7bf526d9c350ad8843efa9a729.png",{searchBar:i,searchBarContent:c,formControls:m,formControlsFocus:h,sampleModalContainer:d,sampleModalContent:u,sampleModalText:g,sampleModalGroup:p,sampleModalItem:b,sampleModalItemLeft:f,sampleModalItemRight:v,imageUrlInput:E,closeSvgContainer:S,closeSvg:C,file:_}={searchBar:"searchBar_bJRy",greet:"greet_xPw8",searchBarContent:"searchBarContent_g7aL",sampleModalContainer:"sampleModalContainer_YZth",sampleModalContent:"sampleModalContent_h1XT",sampleModalText:"sampleModalText_L87D",sampleModalGroup:"sampleModalGroup_srvv",sampleModalItem:"sampleModalItem_jRW7",sampleModalItemLeft:"sampleModalItemLeft_woSj",sampleModalItemRight:"sampleModalItemRight_KOFY",formControls:"formControls_u4_8",formControlsFocus:"formControlsFocus_FXSW",imageUrlInput:"imageUrlInput_DZN9",anilistFilterInput:"anilistFilterInput_KOFE",closeSvgContainer:"closeSvgContainer_LsGX",closeSvg:"closeSvg_MVH7",file:"file_VYY3",iconCheck:"iconCheck_Gn9r",iconCross:"iconCross_mlZi",iconSearch:"iconSearch_RUFK",cutBordersBtn:"cutBordersBtn_d3zU",searchBtn:"searchBtn_yjcE"},w=[{name:"Elephant's Dream",thumbnail:"https://i.ibb.co/B6CJKNk/thumbnail-elephant-s-dream.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/77caefa3-32e1-41cf-94b5-50eeab627a88"},{name:"Big Buck Bunny",thumbnail:"https://i.ibb.co/cvDk98K/thumbnail-big-buck-bunny.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/1f86b1b0-cbbf-4310-8192-cfb4bb2a1f7d"},{name:"Sintel",thumbnail:"https://i.ibb.co/HznXwxq/thumbnail-sintel.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/35dc7137-3573-4c5e-b60f-28b2a25c5636"},{name:"Tears of Steel",thumbnail:"https://i.ibb.co/KNZKffM/thumbnail-tears-of-steel.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/579d871f-669e-42cd-bb6a-148dc03a3a1e"},{name:"Caminandes 2 gran dillama",thumbnail:"https://i.ibb.co/p3wxn1W/thumbnail-Caminandes-2-Gran-Dillama.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/162c3d49-bf16-4ee5-836e-64774bcbac7b"},{name:"Cosmos Laundromat: First Cycle",thumbnail:"https://i.ibb.co/n3j4mRg/thumbnail-Cosmos-Laundromat-First-Cycle.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/8898eb3e-936c-4714-933d-f0bcaeedcca4"},{name:"Glass Half",thumbnail:"https://i.ibb.co/LxPnRJ5/thumbnail-glass-half.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/f9cfbd67-18a0-434c-b67f-5672bd6a9a8c"},{name:"Agent 327",thumbnail:"https://i.ibb.co/N2vhPYf/thumbnail-agent-327.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/8aecb218-3a61-4478-a191-db4d4a331d6e"},{name:"Caminandes 3 Llamigos",thumbnail:"https://i.ibb.co/r7xz8PB/thumbnail-Caminandes-3-Llamigos.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/43d82476-b519-46b5-8e10-722ae20c4184"},{name:"The Daily Dweebs",thumbnail:"https://i.ibb.co/9NWfqQ4/thumbnail-The-Daily-Dweebs.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/487c76b2-2d64-4971-b802-0b17169eaec0"},{name:"HERO",thumbnail:"https://i.ibb.co/vBbtPXz/thumbnail-HERO.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/38a068eb-9045-4962-a21b-74ffe934bc86"},{name:"Spring",thumbnail:"https://i.ibb.co/SxyPjNW/thumbnail-spring.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/0f356261-7ad7-422b-a45e-f925d4ed7be1"},{name:"Coffee Run",thumbnail:"https://i.ibb.co/stHLQKG/thumbnail-coffee-run.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/86a57880-fdba-4559-a085-16b6e8886ac9"},{name:"Sprite Fright",thumbnail:"https://i.ibb.co/pbMGsCV/thumbnail-Sprite-Fright.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/faf2b24f-d88c-48ad-82ec-91f11aa086e5"},{name:"CHARGE",thumbnail:"https://i.ibb.co/sW53x0r/thumbnail-charge.png",url:"https://github.com/shotit/shotit-frontend/assets/27696701/14abcc35-2c10-4200-a69c-3160b06d4ba1"}];function y(e){let{imageURL:t,clearImageURL:a,handleURLpaste:s,handleFileSelect:o}=e;const[l,r]=(0,n.useState)(!1);(0,n.useEffect)((()=>{w.map((e=>{(new Image).src=e.thumbnail,(new Image).src=e.url}))}),[]);const y=(0,n.useCallback)((()=>{r(!0)}),[]);const L=(0,n.useRef)(null);var N;return N=L,(0,n.useEffect)((()=>{function e(e){N.current&&!N.current.contains(e.target)&&r(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[N]),n.createElement("div",{className:i},n.createElement("div",{className:c,ref:L},n.createElement("div",{className:l?`${m} ${h}`:`${m}`},n.createElement("form",null,n.createElement("input",{type:"text",pattern:"https?://.+",required:!0,name:"imageURL",className:E,placeholder:"Paste screenshot URL or drop your screenshot below",value:t.startsWith("http")?t:"",onChange:e=>{s(e),r(!1)},onPaste:()=>{r(!1)},onClick:y}),n.createElement("input",{type:"submit"}),t.startsWith("http")&&n.createElement("div",{className:S,onClick:a},n.createElement("span",{className:C})),n.createElement("div",{className:_},n.createElement("input",{type:"file",name:"files[]",accept:"image/*",onChange:e=>{o(e),r(!1)}})))),l&&n.createElement("div",{className:d},n.createElement("div",{className:u},n.createElement("div",{className:g},n.createElement("strong",null,"Sample Screenshots")),n.createElement("div",{className:p},w.map((e=>{let{name:o,thumbnail:l,url:i}=e;return n.createElement("div",{key:i,className:b,onClick:()=>{t!==i&&(a(),s(i)),r(!1)}},n.createElement("div",{className:f},n.createElement("img",{src:l,alt:o})),n.createElement("div",{className:v},n.createElement("span",null,o)))})))))))}const L={resultBox:"resultBox_Z4xm",filename:"filename_uQLr",thumbnail:"thumbnail_FIAx",metainfo:"metainfo_Hj5_"},N=e=>{const t=parseInt(e,10),a=Math.floor(t/3600),n=Math.floor((t-3600*a)/60),s=t-3600*a-60*n;return[a<10?`0${a}`:a,n<10?`0${n}`:n,s<10?`0${s}`:s].join(":")},x=(e,t,a)=>N(String(e))===N(String(t))?`${N(String(e))}/${N(String(a))}`:`${N(String(e))}-${N(String(t))}/${N(String(a))}`;function I(e){let{filename:t,duration:a,from:s,to:o,imdb:l,similarity:r,image:i,video:c,index:m,activeIndex:h,clickToIndex:d}=e;return n.createElement("div",{onClick:()=>d(m),className:`${L.resultBox}`,style:{boxShadow:""+(m===h?"0 0 15px 5px rgba(13, 110, 253, 0.2)":"0 2px 12px 0 rgba(0,0,0,.2)")}},n.createElement("div",{className:`${L.filename}`},t),n.createElement("div",{className:`${L.thumbnail}`},m===h&&n.createElement("video",{src:c,poster:i,volume:"0",muted:!0,autoPlay:!0,loop:!0,playsInline:!0,onContextMenu:e=>{}}),m!==h&&n.createElement("img",{src:i})),n.createElement("div",{className:`${L.metainfo}`},n.createElement("div",null,x(s,o,a)),n.createElement("div",null,"Similarity: ",`~${(100*r).toFixed(2)}%`),n.createElement("div",null,"IMDB:\xa0",n.createElement("a",{href:`https://www.imdb.com/title/${l}/`,target:"_blank",rel:"noopener noreferrer"},l,n.createElement("svg",{width:"13.5",height:"13.5","aria-hidden":"true",viewBox:"0 0 24 24",className:"iconExternalLink_node_modules-@docusaurus-theme-classic-lib-theme-Icon-ExternalLink-styles-module"},n.createElement("path",{fill:"currentColor",d:"M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"}))))))}const{dropping:B}=l;async function k(e,t){void 0===t&&(t={});const{timeout:a=8e3}=t,n=new AbortController,s=setTimeout((()=>n.abort()),a),o=await fetch(e,{...t,signal:n.signal});return clearTimeout(s),o}const $=function(e,t,a){return new Promise((n=>{let s=new Image;s.crossOrigin="anonymous",s.onload=e=>{let s=document.createElement("canvas");s.crossOrigin="anonymous",s.height=720,"VIDEO"===e.target.nodeName?s.width=e.target.videoWidth/e.target.videoHeight*s.height:s.width=e.target.width/e.target.height*s.height,s.getContext("2d").drawImage(e.target,0,0,s.width,s.height),s.toBlob((function(e){D(e).then((e=>{n(e)})).catch((e=>{console.log(e),a(!0),setTimeout((()=>{a(!1),t()}),1e3)}))}),"image/jpeg",.8)},s.src=e}))},D=async e=>{try{const t=new FormData;t.append("image",e);const a=await k("https://shotit-api.boost-art.net/search?cutBorders=&=",{method:"POST",body:t});return await a.json()}catch(t){throw new Error(t)}},M=async e=>{try{const t=await k(`https://shotit-api.boost-art.net/search?cutBorders=&url=${e}`);return await t.json()}catch(t){throw new Error(t)}};function R(){const[e,t]=(0,n.useState)(""),[a,i]=(0,n.useState)(""),[c,m]=(0,n.useState)([]),[h,d]=(0,n.useState)(0),[u,g]=(0,n.useState)(!1);(0,n.useEffect)((()=>{document.querySelector("footer").setAttribute("style","display: none;");const e=new URLSearchParams(location.search);e.has("url")&&t(e.get("url"));const a=e=>{console.log("image paste");const a=e.clipboardData?.items;if(!a)return;const n=Array.from(a).find((e=>e.type.startsWith("image")));n&&(b(),t(URL.createObjectURL(n.getAsFile())),e.preventDefault())};return window.addEventListener("paste",a,!1),()=>{window.removeEventListener("paste",a)}}),[]),(0,n.useEffect)((()=>{e&&(e.startsWith("blob:")?$(e,b,g).then((e=>{console.log("toBlob");const{result:t=[]}=e;m(t)})):M(e).then((e=>{console.log("urlSearch");const{result:t=[]}=e;m(t)})).catch((e=>{console.log(e),g(!0),setTimeout((()=>{g(!1),b()}),1e3)})))}),[e]);const p=(0,n.useCallback)((e=>{console.log("clickToIndex"),d(e)}),[]),b=(0,n.useCallback)((()=>{console.log("clearImageURL"),t(""),m([]),d(0)}),[]),f=(0,n.useCallback)((e=>(console.log("handleURLpaste"),String(e).startsWith("http")?(b(),t(e),void history.replaceState(null,null,`/shotit-frontend/demo?url=${encodeURIComponent(e)}`)):e.target.value.length?void(e.target.parentNode.checkValidity()?(b(),t(e.target.value),history.replaceState(null,null,`/shotit-frontend/demo?url=${encodeURIComponent(e.target.value)}`)):e.target.parentNode.querySelector("input[type=submit]").click()):(b(),void history.replaceState(null,null,"/shotit-frontend/demo")))),[]),v=(0,n.useCallback)((e=>{console.log("handleFileSelect"),e.stopPropagation(),e.preventDefault();const a=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0];return a&&a.type.match("image.*")?(b(),t(URL.createObjectURL(a)),""):"Error: File is not an image"}),[]);return n.createElement(s.Z,null,n.createElement("div",{className:l.demoContainer},n.createElement("div",{className:"row"},n.createElement("div",{className:`col col--12 ${l.searchBarContainer}`},n.createElement(y,{imageURL:e,clearImageURL:b,handleURLpaste:f,handleFileSelect:v}))),n.createElement("div",{className:"row"},n.createElement("div",{className:`col col--6 ${l.leftDemoSide}`},n.createElement("img",{src:e||r,alt:""}),n.createElement("div",{className:l.dropEffect,onDrop:e=>{const t=v(e);t?i(t):e.target.classList.remove(B)},onDragOver:e=>{e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDragEnter:e=>{e.target.classList.add(B),i("Drop image here")},onDragLeave:e=>{e.target.classList.remove(B)}},a)),e&&0===c.length&&!u&&n.createElement("div",{className:`col col--6 ${l.rightDemoSide} ${l.searching}`},n.createElement("div",null,n.createElement("div",{className:l.loadingSvg}),n.createElement("p",{className:l.searchingText},"Searching..."))),e&&0===c.length&&u&&n.createElement("div",{className:`col col--6 ${l.rightDemoSide} ${l.searching}`},n.createElement("div",null,n.createElement("div",{className:l.loadingSvg}),n.createElement("p",{className:l.searchingText},"Error!"))),e&&c.length>0&&n.createElement("div",{className:`col col--6 ${l.rightDemoSide} ${l.resultArea}`},c.map(((e,t)=>{let{filename:a,duration:s,from:o,to:l,imdb:r,similarity:i,image:c,video:m}=e;return n.createElement(I,{key:`${Date.now()}${i}`,filename:a,duration:s,from:o,to:l,imdb:r,similarity:i,image:c,video:m,index:t,activeIndex:h,clickToIndex:p})}))),!e&&n.createElement("div",{className:`col col--6 ${l.rightDemoSide} ${l.skeleton}`},n.createElement(o.Z,{paragraph:{rows:2}}),n.createElement(o.Z.Avatar,{size:100,shape:"square"}),n.createElement(o.Z,{paragraph:{rows:4}})))))}}}]);