"use strict";(self.webpackChunkshotit_frontend=self.webpackChunkshotit_frontend||[]).push([[660],{8735:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var s=a(7294),n=a(7961),r=a(1100);const o={demoContainer:"demoContainer_ryNF",searchBarContainer:"searchBarContainer_jUod",leftDemoSide:"leftDemoSide_MgLx",rightDemoSide:"rightDemoSide_e2SL",skeleton:"skeleton_U82o",searching:"searching_hC35",resultArea:"resultArea_LlqA",resultBox:"resultBox_lQJA",filename:"filename_asqc",thumbnail:"thumbnail_SaY7",metainfo:"metainfo_cmrU",loadingSvg:"loadingSvg_jZrn",searchingText:"searchingText_sLVQ",dropEffect:"dropEffect_eBLf",dropping:"dropping_urYM"},l=a.p+"assets/images/default-e894fa7bf526d9c350ad8843efa9a729.png",{searchBar:c,searchBarContent:i,formControls:m,formControlsFocus:h,sampleModalContainer:d,sampleModalContent:u,sampleModalText:g,sampleModalGroup:b,sampleModalItem:f,sampleModalItemLeft:p,sampleModalItemRight:v,imageUrlInput:E,closeSvgContainer:S,closeSvg:C,file:_}={searchBar:"searchBar_bJRy",greet:"greet_xPw8",searchBarContent:"searchBarContent_g7aL",sampleModalContainer:"sampleModalContainer_YZth",sampleModalContent:"sampleModalContent_h1XT",sampleModalText:"sampleModalText_L87D",sampleModalGroup:"sampleModalGroup_srvv",sampleModalItem:"sampleModalItem_jRW7",sampleModalItemLeft:"sampleModalItemLeft_woSj",sampleModalItemRight:"sampleModalItemRight_KOFY",formControls:"formControls_u4_8",formControlsFocus:"formControlsFocus_FXSW",imageUrlInput:"imageUrlInput_DZN9",anilistFilterInput:"anilistFilterInput_KOFE",closeSvgContainer:"closeSvgContainer_LsGX",closeSvg:"closeSvg_MVH7",file:"file_VYY3",iconCheck:"iconCheck_Gn9r",iconCross:"iconCross_mlZi",iconSearch:"iconSearch_RUFK",cutBordersBtn:"cutBordersBtn_d3zU",searchBtn:"searchBtn_yjcE"},w=[{name:"Elephant's Dream",thumbnail:"https://github.com/user-attachments/assets/c00fdb81-0b81-4e62-ae5a-f113d408c993",url:"https://github.com/shotit/shotit-frontend/assets/27696701/77caefa3-32e1-41cf-94b5-50eeab627a88"},{name:"Big Buck Bunny",thumbnail:"https://github.com/user-attachments/assets/2a67a36c-ab69-4e30-9b54-d22f3d5ecc7d",url:"https://github.com/shotit/shotit-frontend/assets/27696701/1f86b1b0-cbbf-4310-8192-cfb4bb2a1f7d"},{name:"Sintel",thumbnail:"https://github.com/user-attachments/assets/a0d4efe3-ec6b-48a3-aa12-6bc1972a5fa5",url:"https://github.com/shotit/shotit-frontend/assets/27696701/35dc7137-3573-4c5e-b60f-28b2a25c5636"},{name:"Tears of Steel",thumbnail:"https://github.com/user-attachments/assets/2f69840b-7c42-4427-8a4c-bdbe3e33e6d3",url:"https://github.com/user-attachments/assets/eda091b5-c771-4d09-99fd-a32722d6f96d"},{name:"Caminandes 2 gran dillama",thumbnail:"https://github.com/user-attachments/assets/413d0c7b-9a91-41e7-a42f-dcb15fea4bf6",url:"https://github.com/shotit/shotit-frontend/assets/27696701/162c3d49-bf16-4ee5-836e-64774bcbac7b"},{name:"Cosmos Laundromat: First Cycle",thumbnail:"https://github.com/user-attachments/assets/d49a255d-c709-49a5-87da-08fc9faa245e",url:"https://github.com/shotit/shotit-frontend/assets/27696701/8898eb3e-936c-4714-933d-f0bcaeedcca4"},{name:"Glass Half",thumbnail:"https://github.com/user-attachments/assets/4f90f282-aad2-4b3b-bb25-4e8fb372e33b",url:"https://github.com/shotit/shotit-frontend/assets/27696701/f9cfbd67-18a0-434c-b67f-5672bd6a9a8c"},{name:"Agent 327",thumbnail:"https://github.com/user-attachments/assets/8d051f7c-9657-4ae5-8709-a493102a0a3b",url:"https://github.com/shotit/shotit-frontend/assets/27696701/8aecb218-3a61-4478-a191-db4d4a331d6e"},{name:"Caminandes 3 Llamigos",thumbnail:"https://github.com/user-attachments/assets/26f8b772-bb41-400f-9d6e-eebef23c4bd7",url:"https://github.com/shotit/shotit-frontend/assets/27696701/43d82476-b519-46b5-8e10-722ae20c4184"},{name:"The Daily Dweebs",thumbnail:"https://github.com/user-attachments/assets/895ba30a-27a7-41c4-bd41-97889db27f8a",url:"https://github.com/shotit/shotit-frontend/assets/27696701/487c76b2-2d64-4971-b802-0b17169eaec0"},{name:"HERO",thumbnail:"https://github.com/user-attachments/assets/41e0a497-a4cf-4de0-aef3-f28b7e675c42",url:"https://github.com/shotit/shotit-frontend/assets/27696701/38a068eb-9045-4962-a21b-74ffe934bc86"},{name:"Spring",thumbnail:"https://github.com/user-attachments/assets/5c904366-863a-4f1a-870c-868d6a26cde5",url:"https://github.com/shotit/shotit-frontend/assets/27696701/0f356261-7ad7-422b-a45e-f925d4ed7be1"},{name:"Coffee Run",thumbnail:"https://github.com/user-attachments/assets/7192d793-b239-4191-b9f4-d8131dbf4b12",url:"https://github.com/shotit/shotit-frontend/assets/27696701/86a57880-fdba-4559-a085-16b6e8886ac9"},{name:"Sprite Fright",thumbnail:"https://github.com/user-attachments/assets/c3ae385e-1450-474a-b6c5-de7946880d4a",url:"https://github.com/shotit/shotit-frontend/assets/27696701/faf2b24f-d88c-48ad-82ec-91f11aa086e5"},{name:"CHARGE",thumbnail:"https://github.com/user-attachments/assets/d5837045-4445-4a53-8488-ace794c095e5",url:"https://github.com/shotit/shotit-frontend/assets/27696701/14abcc35-2c10-4200-a69c-3160b06d4ba1"}];function y(e){let{imageURL:t,clearImageURL:a,handleURLpaste:n,handleFileSelect:r}=e;const[o,l]=(0,s.useState)(!1);(0,s.useEffect)((()=>{w.map((e=>{(new Image).src=e.thumbnail,(new Image).src=e.url}))}),[]);const y=(0,s.useCallback)((()=>{l(!0)}),[]);const L=(0,s.useRef)(null);var N;return N=L,(0,s.useEffect)((()=>{function e(e){N.current&&!N.current.contains(e.target)&&l(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[N]),s.createElement("div",{className:c},s.createElement("div",{className:i,ref:L},s.createElement("div",{className:o?`${m} ${h}`:`${m}`},s.createElement("form",null,s.createElement("input",{type:"text",pattern:"https?://.+",required:!0,name:"imageURL",className:E,placeholder:"Paste screenshot URL or drop your screenshot below",value:t.startsWith("http")?t:"",onChange:e=>{n(e),l(!1)},onPaste:()=>{l(!1)},onClick:y}),s.createElement("input",{type:"submit"}),t.startsWith("http")&&s.createElement("div",{className:S,onClick:a},s.createElement("span",{className:C})),s.createElement("div",{className:_},s.createElement("input",{type:"file",name:"files[]",accept:"image/*",onChange:e=>{r(e),l(!1)}})))),o&&s.createElement("div",{className:d},s.createElement("div",{className:u},s.createElement("div",{className:g},s.createElement("strong",null,"Sample Screenshots")),s.createElement("div",{className:b},w.map((e=>{let{name:r,thumbnail:o,url:c}=e;return s.createElement("div",{key:c,className:f,onClick:()=>{t!==c&&(a(),n(c)),l(!1)}},s.createElement("div",{className:p},s.createElement("img",{src:o,alt:r})),s.createElement("div",{className:v},s.createElement("span",null,r)))})))))))}const L={resultBox:"resultBox_Z4xm",filename:"filename_uQLr",thumbnail:"thumbnail_FIAx",metainfo:"metainfo_Hj5_"},N=e=>{const t=parseInt(e,10),a=Math.floor(t/3600),s=Math.floor((t-3600*a)/60),n=t-3600*a-60*s;return[a<10?`0${a}`:a,s<10?`0${s}`:s,n<10?`0${n}`:n].join(":")},x=(e,t,a)=>N(String(e))===N(String(t))?`${N(String(e))}/${N(String(a))}`:`${N(String(e))}-${N(String(t))}/${N(String(a))}`;function I(e){let{filename:t,duration:a,from:n,to:r,imdb:o,similarity:l,image:c,video:i,index:m,activeIndex:h,clickToIndex:d}=e;return s.createElement("div",{onClick:()=>d(m),className:`${L.resultBox}`,style:{boxShadow:""+(m===h?"0 0 15px 5px rgba(13, 110, 253, 0.2)":"0 2px 12px 0 rgba(0,0,0,.2)")}},s.createElement("div",{className:`${L.filename}`},t),s.createElement("div",{className:`${L.thumbnail}`},m===h&&s.createElement("video",{src:i,poster:c,volume:"0",muted:!0,autoPlay:!0,loop:!0,playsInline:!0,onContextMenu:e=>{}}),m!==h&&s.createElement("img",{src:c})),s.createElement("div",{className:`${L.metainfo}`},s.createElement("div",null,x(n,r,a)),s.createElement("div",null,"Similarity: ",`~${(100*l).toFixed(2)}%`),s.createElement("div",null,"IMDB:\xa0",s.createElement("a",{href:`https://www.imdb.com/title/${o}/`,target:"_blank",rel:"noopener noreferrer"},o,s.createElement("svg",{width:"13.5",height:"13.5","aria-hidden":"true",viewBox:"0 0 24 24",className:"iconExternalLink_node_modules-@docusaurus-theme-classic-lib-theme-Icon-ExternalLink-styles-module"},s.createElement("path",{fill:"currentColor",d:"M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"}))))))}const{dropping:$}=o;async function B(e,t){void 0===t&&(t={});const{timeout:a=8e3}=t,s=new AbortController,n=setTimeout((()=>s.abort()),a),r=await fetch(e,{...t,signal:s.signal});return clearTimeout(n),r}const k=function(e,t,a){return new Promise((s=>{let n=new Image;n.crossOrigin="anonymous",n.onload=e=>{let n=document.createElement("canvas");n.crossOrigin="anonymous",n.height=720,"VIDEO"===e.target.nodeName?n.width=e.target.videoWidth/e.target.videoHeight*n.height:n.width=e.target.width/e.target.height*n.height,n.getContext("2d").drawImage(e.target,0,0,n.width,n.height),n.toBlob((function(e){M(e).then((e=>{s(e)})).catch((e=>{console.log(e),a(!0),setTimeout((()=>{a(!1),t()}),1e3)}))}),"image/jpeg",.8)},n.src=e}))},M=async e=>{try{const t=new FormData;t.append("image",e);const a=await B("https://shotit-api.boost-art.net/search?cutBorders=&=",{method:"POST",body:t});return await a.json()}catch(t){throw new Error(t)}},D=async e=>{try{const t=await B(`https://shotit-api.boost-art.net/search?cutBorders=&url=${e}`);return await t.json()}catch(t){throw new Error(t)}};function R(){const[e,t]=(0,s.useState)(""),[a,c]=(0,s.useState)(""),[i,m]=(0,s.useState)([]),[h,d]=(0,s.useState)(0),[u,g]=(0,s.useState)(!1);(0,s.useEffect)((()=>{document.querySelector("footer").setAttribute("style","display: none;");const e=new URLSearchParams(location.search);e.has("url")&&t(e.get("url"));const a=e=>{console.log("image paste");const a=e.clipboardData?.items;if(!a)return;const s=Array.from(a).find((e=>e.type.startsWith("image")));s&&(f(),t(URL.createObjectURL(s.getAsFile())),e.preventDefault())};return window.addEventListener("paste",a,!1),()=>{window.removeEventListener("paste",a)}}),[]),(0,s.useEffect)((()=>{e&&(e.startsWith("blob:")?k(e,f,g).then((e=>{console.log("toBlob");const{result:t=[]}=e;m(t)})):D(e).then((e=>{console.log("urlSearch");const{result:t=[]}=e;m(t)})).catch((e=>{console.log(e),g(!0),setTimeout((()=>{g(!1),f()}),1e3)})))}),[e]);const b=(0,s.useCallback)((e=>{console.log("clickToIndex"),d(e)}),[]),f=(0,s.useCallback)((()=>{console.log("clearImageURL"),t(""),m([]),d(0)}),[]),p=(0,s.useCallback)((e=>(console.log("handleURLpaste"),String(e).startsWith("http")?(f(),t(e),void history.replaceState(null,null,`/shotit-frontend/demo?url=${encodeURIComponent(e)}`)):e.target.value.length?void(e.target.parentNode.checkValidity()?(f(),t(e.target.value),history.replaceState(null,null,`/shotit-frontend/demo?url=${encodeURIComponent(e.target.value)}`)):e.target.parentNode.querySelector("input[type=submit]").click()):(f(),void history.replaceState(null,null,"/shotit-frontend/demo")))),[]),v=(0,s.useCallback)((e=>{console.log("handleFileSelect"),e.stopPropagation(),e.preventDefault();const a=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0];return a&&a.type.match("image.*")?(f(),t(URL.createObjectURL(a)),""):"Error: File is not an image"}),[]);return s.createElement(n.Z,null,s.createElement("div",{className:o.demoContainer},s.createElement("div",{className:"row"},s.createElement("div",{className:`col col--12 ${o.searchBarContainer}`},s.createElement(y,{imageURL:e,clearImageURL:f,handleURLpaste:p,handleFileSelect:v}))),s.createElement("div",{className:"row"},s.createElement("div",{className:`col col--6 ${o.leftDemoSide}`},s.createElement("img",{src:e||l,alt:""}),s.createElement("div",{className:o.dropEffect,onDrop:e=>{const t=v(e);t?c(t):e.target.classList.remove($)},onDragOver:e=>{e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDragEnter:e=>{e.target.classList.add($),c("Drop image here")},onDragLeave:e=>{e.target.classList.remove($)}},a)),e&&0===i.length&&!u&&s.createElement("div",{className:`col col--6 ${o.rightDemoSide} ${o.searching}`},s.createElement("div",null,s.createElement("div",{className:o.loadingSvg}),s.createElement("p",{className:o.searchingText},"Searching..."))),e&&0===i.length&&u&&s.createElement("div",{className:`col col--6 ${o.rightDemoSide} ${o.searching}`},s.createElement("div",null,s.createElement("div",{className:o.loadingSvg}),s.createElement("p",{className:o.searchingText},"Error!"))),e&&i.length>0&&s.createElement("div",{className:`col col--6 ${o.rightDemoSide} ${o.resultArea}`},i.map(((e,t)=>{let{filename:a,duration:n,from:r,to:o,imdb:l,similarity:c,image:i,video:m}=e;return s.createElement(I,{key:`${Date.now()}${c}`,filename:a,duration:n,from:r,to:o,imdb:l,similarity:c,image:i,video:m,index:t,activeIndex:h,clickToIndex:b})}))),!e&&s.createElement("div",{className:`col col--6 ${o.rightDemoSide} ${o.skeleton}`},s.createElement(r.Z,{paragraph:{rows:2}}),s.createElement(r.Z.Avatar,{size:100,shape:"square"}),s.createElement(r.Z,{paragraph:{rows:4}})))))}}}]);