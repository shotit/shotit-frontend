"use strict";(self.webpackChunkshotit_frontend=self.webpackChunkshotit_frontend||[]).push([[660],{8735:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var n=a(7294),s=a(7961),r=a(1100);const l={demoContainer:"demoContainer_ryNF",searchBarContainer:"searchBarContainer_jUod",leftDemoSide:"leftDemoSide_MgLx",rightDemoSide:"rightDemoSide_e2SL",skeleton:"skeleton_U82o",searching:"searching_hC35",resultArea:"resultArea_LlqA",resultBox:"resultBox_lQJA",filename:"filename_asqc",thumbnail:"thumbnail_SaY7",metainfo:"metainfo_cmrU",loadingSvg:"loadingSvg_jZrn",searchingText:"searchingText_sLVQ",dropEffect:"dropEffect_eBLf",dropping:"dropping_urYM"},o=a.p+"assets/images/default-e894fa7bf526d9c350ad8843efa9a729.png";var c=a(4522);const{searchBar:i,searchBarContent:m,formControls:u,formControlsFocus:d,sampleModalContainer:h,sampleModalContent:g,sampleModalText:p,sampleModalGroup:b,sampleModalItem:f,sampleModalItemLeft:v,sampleModalItemRight:w,imageUrlInput:E,closeSvgContainer:_,closeSvg:S,file:C}={searchBar:"searchBar_bJRy",greet:"greet_xPw8",searchBarContent:"searchBarContent_g7aL",sampleModalContainer:"sampleModalContainer_YZth",sampleModalContent:"sampleModalContent_h1XT",sampleModalText:"sampleModalText_L87D",sampleModalGroup:"sampleModalGroup_srvv",sampleModalItem:"sampleModalItem_jRW7",sampleModalItemLeft:"sampleModalItemLeft_woSj",sampleModalItemRight:"sampleModalItemRight_KOFY",formControls:"formControls_u4_8",formControlsFocus:"formControlsFocus_FXSW",imageUrlInput:"imageUrlInput_DZN9",anilistFilterInput:"anilistFilterInput_KOFE",closeSvgContainer:"closeSvgContainer_LsGX",closeSvg:"closeSvg_MVH7",file:"file_VYY3",iconCheck:"iconCheck_Gn9r",iconCross:"iconCross_mlZi",iconSearch:"iconSearch_RUFK",cutBordersBtn:"cutBordersBtn_d3zU",searchBtn:"searchBtn_yjcE"},k=[{name:"Big Buck Bunny",thumbnail:"https://github.com/user-attachments/assets/2a67a36c-ab69-4e30-9b54-d22f3d5ecc7d",url:"https://westartbucket101.blob.core.windows.net/image/big_buck_bunny.jpg"},{name:"Elephant's Dream",thumbnail:"https://github.com/user-attachments/assets/c00fdb81-0b81-4e62-ae5a-f113d408c993",url:"https://westartbucket101.blob.core.windows.net/image/elephant_s_dream.jpg"},{name:"Sintel",thumbnail:"https://github.com/user-attachments/assets/a0d4efe3-ec6b-48a3-aa12-6bc1972a5fa5",url:"https://westartbucket101.blob.core.windows.net/image/sintel.jpg"},{name:"Tears of Steel",thumbnail:"https://github.com/user-attachments/assets/2f69840b-7c42-4427-8a4c-bdbe3e33e6d3",url:"https://westartbucket101.blob.core.windows.net/image/tears_of_steel.jpg"},{name:"Caminandes 2 gran dillama",thumbnail:"https://github.com/user-attachments/assets/413d0c7b-9a91-41e7-a42f-dcb15fea4bf6",url:"https://westartbucket101.blob.core.windows.net/image/Caminandes_2_Gran_Dillama.jpg"},{name:"Cosmos Laundromat: First Cycle",thumbnail:"https://github.com/user-attachments/assets/d49a255d-c709-49a5-87da-08fc9faa245e",url:"https://westartbucket101.blob.core.windows.net/image/CosmosLaundromat-FirstCycle.jpg"},{name:"Glass Half",thumbnail:"https://github.com/user-attachments/assets/4f90f282-aad2-4b3b-bb25-4e8fb372e33b",url:"https://westartbucket101.blob.core.windows.net/image/glass_half.jpg"},{name:"Agent 327",thumbnail:"https://github.com/user-attachments/assets/8d051f7c-9657-4ae5-8709-a493102a0a3b",url:"https://westartbucket101.blob.core.windows.net/image/agent_327.jpg"},{name:"Caminandes 3 Llamigos",thumbnail:"https://github.com/user-attachments/assets/26f8b772-bb41-400f-9d6e-eebef23c4bd7",url:"https://westartbucket101.blob.core.windows.net/image/Caminandes_3_Llamigos.jpg"},{name:"The Daily Dweebs",thumbnail:"https://github.com/user-attachments/assets/895ba30a-27a7-41c4-bd41-97889db27f8a",url:"https://westartbucket101.blob.core.windows.net/image/The_Daily_Dweebs.jpg"},{name:"HERO",thumbnail:"https://github.com/user-attachments/assets/41e0a497-a4cf-4de0-aef3-f28b7e675c42",url:"https://westartbucket101.blob.core.windows.net/image/HERO.jpg"},{name:"Spring",thumbnail:"https://github.com/user-attachments/assets/5c904366-863a-4f1a-870c-868d6a26cde5",url:"https://westartbucket101.blob.core.windows.net/image/spring.jpg"},{name:"Coffee Run",thumbnail:"https://github.com/user-attachments/assets/7192d793-b239-4191-b9f4-d8131dbf4b12",url:"https://westartbucket101.blob.core.windows.net/image/coffee_run.jpg"},{name:"Sprite Fright",thumbnail:"https://github.com/user-attachments/assets/c3ae385e-1450-474a-b6c5-de7946880d4a",url:"https://westartbucket101.blob.core.windows.net/image/Sprite-Fright.jpg"},{name:"CHARGE",thumbnail:"https://github.com/user-attachments/assets/d5837045-4445-4a53-8488-ace794c095e5",url:"https://westartbucket101.blob.core.windows.net/image/charge.jpg"}];function y(e){let{imageURL:t,clearImageURL:a,handleURLpaste:s,handleFileSelect:r}=e;const[l,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=k.reduce(((e,t)=>(e.push(t.thumbnail),e.push(t.url),e)),[]);(0,c.ZP)(e,(()=>{console.log("sampleScreenshots preload")}))}),[]);const y=(0,n.useCallback)((()=>{o(!0)}),[]);const L=(0,n.useRef)(null);var N;return N=L,(0,n.useEffect)((()=>{function e(e){N.current&&!N.current.contains(e.target)&&o(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[N]),n.createElement("div",{className:i},n.createElement("div",{className:m,ref:L},n.createElement("div",{className:l?`${u} ${d}`:`${u}`},n.createElement("form",null,n.createElement("input",{type:"text",pattern:"https?://.+",required:!0,name:"imageURL",className:E,placeholder:"Paste screenshot URL or drop your screenshot below",value:t.startsWith("http")?t:"",onChange:e=>{s(e),o(!1)},onPaste:()=>{o(!1)},onClick:y}),n.createElement("input",{type:"submit"}),t.startsWith("http")&&n.createElement("div",{className:_,onClick:a},n.createElement("span",{className:S})),n.createElement("div",{className:C},n.createElement("input",{type:"file",name:"files[]",accept:"image/*",onChange:e=>{r(e),o(!1)}})))),l&&n.createElement("div",{className:h},n.createElement("div",{className:g},n.createElement("div",{className:p},n.createElement("strong",null,"Sample Screenshots")),n.createElement("div",{className:b},k.map((e=>{let{name:r,thumbnail:l,url:c}=e;return n.createElement("div",{key:c,className:f,onClick:()=>{t!==c&&(a(),s(c)),o(!1)}},n.createElement("div",{className:v},n.createElement("img",{src:l,alt:r})),n.createElement("div",{className:w},n.createElement("span",null,r)))})))))))}const L={resultBox:"resultBox_Z4xm",filename:"filename_uQLr",thumbnail:"thumbnail_FIAx",metainfo:"metainfo_Hj5_"},N=e=>{const t=parseInt(e,10),a=Math.floor(t/3600),n=Math.floor((t-3600*a)/60),s=t-3600*a-60*n;return[a<10?`0${a}`:a,n<10?`0${n}`:n,s<10?`0${s}`:s].join(":")},x=(e,t,a)=>N(String(e))===N(String(t))?`${N(String(e))}/${N(String(a))}`:`${N(String(e))}-${N(String(t))}/${N(String(a))}`;function I(e){let{filename:t,duration:a,from:s,to:r,imdb:l,similarity:o,image:c,video:i,index:m,activeIndex:u,clickToIndex:d}=e;return n.createElement("div",{onClick:()=>d(m),className:`${L.resultBox}`,style:{boxShadow:""+(m===u?"0 0 15px 5px rgba(13, 110, 253, 0.2)":"0 2px 12px 0 rgba(0,0,0,.2)")}},n.createElement("div",{className:`${L.filename}`},t),n.createElement("div",{className:`${L.thumbnail}`},m===u&&n.createElement("video",{src:i,poster:c,volume:"0",muted:!0,autoPlay:!0,loop:!0,playsInline:!0,onContextMenu:e=>{}}),m!==u&&n.createElement("img",{src:c})),n.createElement("div",{className:`${L.metainfo}`},n.createElement("div",null,x(s,r,a)),n.createElement("div",null,"Similarity: ",`~${(100*o).toFixed(2)}%`),n.createElement("div",null,"IMDB:\xa0",n.createElement("a",{href:`https://www.imdb.com/title/${l}/`,target:"_blank",rel:"noopener noreferrer"},l,n.createElement("svg",{width:"13.5",height:"13.5","aria-hidden":"true",viewBox:"0 0 24 24",className:"iconExternalLink_node_modules-@docusaurus-theme-classic-lib-theme-Icon-ExternalLink-styles-module"},n.createElement("path",{fill:"currentColor",d:"M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"}))))))}const{dropping:$}=l;async function B(e,t){void 0===t&&(t={});const{timeout:a=8e3}=t,n=new AbortController,s=setTimeout((()=>n.abort()),a),r=await fetch(e,{...t,signal:n.signal});return clearTimeout(s),r}const D=function(e,t,a){return new Promise((n=>{let s=new Image;s.crossOrigin="anonymous",s.onload=e=>{let s=document.createElement("canvas");s.crossOrigin="anonymous",s.height=720,"VIDEO"===e.target.nodeName?s.width=e.target.videoWidth/e.target.videoHeight*s.height:s.width=e.target.width/e.target.height*s.height,s.getContext("2d").drawImage(e.target,0,0,s.width,s.height),s.toBlob((function(e){M(e).then((e=>{n(e)})).catch((e=>{console.log(e),a(!0),setTimeout((()=>{a(!1),t()}),1e3)}))}),"image/jpeg",.8)},s.src=e}))},M=async e=>{try{const t=new FormData;t.append("image",e);const a=await B("https://shotit-api.boost-art.net/search?cutBorders=&=",{method:"POST",body:t});return await a.json()}catch(t){throw new Error(t)}},R=async e=>{try{const t=await B(`https://shotit-api.boost-art.net/search?cutBorders=&url=${e}`);return await t.json()}catch(t){throw new Error(t)}};function j(){const[e,t]=(0,n.useState)(""),[a,c]=(0,n.useState)(""),[i,m]=(0,n.useState)([]),[u,d]=(0,n.useState)(0),[h,g]=(0,n.useState)(!1);(0,n.useEffect)((()=>{document.querySelector("footer").setAttribute("style","display: none;");const e=new URLSearchParams(location.search);e.has("url")&&t(e.get("url"));const a=e=>{console.log("image paste");const a=e.clipboardData?.items;if(!a)return;const n=Array.from(a).find((e=>e.type.startsWith("image")));n&&(b(),t(URL.createObjectURL(n.getAsFile())),e.preventDefault())};return window.addEventListener("paste",a,!1),()=>{window.removeEventListener("paste",a)}}),[]),(0,n.useEffect)((()=>{e&&(e.startsWith("blob:")?D(e,b,g).then((e=>{console.log("toBlob");const{result:t=[]}=e;m(t)})):R(e).then((e=>{console.log("urlSearch");const{result:t=[]}=e;m(t)})).catch((e=>{console.log(e),g(!0),setTimeout((()=>{g(!1),b()}),1e3)})))}),[e]);const p=(0,n.useCallback)((e=>{console.log("clickToIndex"),d(e)}),[]),b=(0,n.useCallback)((()=>{console.log("clearImageURL"),t(""),m([]),d(0)}),[]),f=(0,n.useCallback)((e=>(console.log("handleURLpaste"),String(e).startsWith("http")?(b(),t(e),void history.replaceState(null,null,`/shotit-frontend/demo?url=${encodeURIComponent(e)}`)):e.target.value.length?void(e.target.parentNode.checkValidity()?(b(),t(e.target.value),history.replaceState(null,null,`/shotit-frontend/demo?url=${encodeURIComponent(e.target.value)}`)):e.target.parentNode.querySelector("input[type=submit]").click()):(b(),void history.replaceState(null,null,"/shotit-frontend/demo")))),[]),v=(0,n.useCallback)((e=>{console.log("handleFileSelect"),e.stopPropagation(),e.preventDefault();const a=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0];return a&&a.type.match("image.*")?(b(),t(URL.createObjectURL(a)),""):"Error: File is not an image"}),[]);return n.createElement(s.Z,null,n.createElement("div",{className:l.demoContainer},n.createElement("div",{className:"row"},n.createElement("div",{className:`col col--12 ${l.searchBarContainer}`},n.createElement(y,{imageURL:e,clearImageURL:b,handleURLpaste:f,handleFileSelect:v}))),n.createElement("div",{className:"row"},n.createElement("div",{className:`col col--6 ${l.leftDemoSide}`},n.createElement("img",{src:e||o,alt:""}),n.createElement("div",{className:l.dropEffect,onDrop:e=>{const t=v(e);t?c(t):e.target.classList.remove($)},onDragOver:e=>{e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDragEnter:e=>{e.target.classList.add($),c("Drop image here")},onDragLeave:e=>{e.target.classList.remove($)}},a)),e&&0===i.length&&!h&&n.createElement("div",{className:`col col--6 ${l.rightDemoSide} ${l.searching}`},n.createElement("div",null,n.createElement("div",{className:l.loadingSvg}),n.createElement("p",{className:l.searchingText},"Searching..."))),e&&0===i.length&&h&&n.createElement("div",{className:`col col--6 ${l.rightDemoSide} ${l.searching}`},n.createElement("div",null,n.createElement("div",{className:l.loadingSvg}),n.createElement("p",{className:l.searchingText},"Error!"))),e&&i.length>0&&n.createElement("div",{className:`col col--6 ${l.rightDemoSide} ${l.resultArea}`},i.map(((e,t)=>{let{filename:a,duration:s,from:r,to:l,imdb:o,similarity:c,image:i,video:m}=e;return n.createElement(I,{key:`${Date.now()}${c}`,filename:a,duration:s,from:r,to:l,imdb:o,similarity:c,image:i,video:m,index:t,activeIndex:u,clickToIndex:p})}))),!e&&n.createElement("div",{className:`col col--6 ${l.rightDemoSide} ${l.skeleton}`},n.createElement(r.Z,{paragraph:{rows:2}}),n.createElement(r.Z.Avatar,{size:100,shape:"square"}),n.createElement(r.Z,{paragraph:{rows:4}})))))}}}]);